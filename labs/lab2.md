# Лабораторная работа №2

Знакомство с основными средствами администрирования UNIX-подобных систем на примере дистрибутива Ubuntu Server.

## Рассматриваемые вопросы:

1. [Работа с файлами](#1)
   * [Все имена файлов регистрозависимы](#11)
   * [Все является файлом](#12)
   * [Утилита `file`](#13)
   * [Утилита `touch`](#14)
   * [Утилита `rm`](#15)
   * [Утилита `cp`](#16)
   * [Утилита `mv`](#17)
2. [Работа с содержимым файлов](#2)
   * [Утилита `head`](#21)
   * [Утилита `tail`](#22)
   * [Утилита `cat`](#23)
   * [Утилиты `more` и `less`](#24)

# Работа с файлами <a name="1"></a>

## Все имена файлов регистрозависимы <a name="11"></a>

Имена файлов в Linux (или в любой системе Unix) являются регистрозависимыми. Это означает, что имена FILE1 и file1 не являются равноценными, а путь к файлу `/etc/hosts` отличен от пути к файлу `/etc/Hosts`.

## Все является файлом <a name="12"></a>

Любая директория на самом деле является файлом, хотя этот файл и имеет специальный тип. Каждый терминал (например, `/dev/pts/4`), любой жесткий диск или раздел на нем (например, `/dev/sdb1`) и любой процесс представлены где-либо в рамках файловой системы с помощью файла.

## Утилита `file` <a name="13"></a>

Утилита `file` предназначена для определения типа файла. В Linux для определения типов файлов не используются их расширения. Для инструментов с интерфейсом командной строки абсолютно безразлично, оканчивается ли имя файла на .txt или на .pdf. Исполняя обязанности системного администратора, вы должны использовать команду file для установления типа интересующего вас файла.  
Утилита `file` использует файл со списком "магических последовательностей байт", содержащий шаблоны для распознавания типов данных. Файл со списком "магических последовательностей байт" расположен по пути `/usr/share/file/magic`. Используйте команду `man 5 magic` в случае необходимости получения дополнительной информации о нем.  
Важно отметить, что для работы с такими специальными файлами, как файлы из директорий `/dev` и `/proc`, следует использовать команду `file -s`.

## Утилита `touch` <a name="14"></a>

Изначально утилита `touch` предназначена для установки времени последнего изменения файла или доступа в текущее время. Но при применении ее к несуществующему файлу, данная утилита его создает.

## Утилита `rm` <a name="15"></a>

### Удаление файлов навсегда

В том случае, если вам больше не нужен файл, следует использовать утилиту `rm` для его удаления. В отличие от некоторых графических пользовательских интерфейсов, интерфейс командной строки системы не предполагает использования таких хранилищ файлов, как корзина, предназначенных для последующего восстановления удаленных файлов. Если вы удалили файл с помощью утилиты `rm`, этот файл будет удален навсегда.

### Команда `rm -i`

Для того, чтобы застраховаться от случайного удаления файла, вы можете использовать команду `rm -i`.

### Команда `rm -rf`

По умолчанию с помощью команды `rm -r` невозможно удалить непустые директории. Однако, утилита `rm` принимает параметры, которые позволят вам удалять любую директорию. Команда `rm -rf` известна благодаря тому, что она позволяет удалять все элементы файловой системы (конечно же, в том случае, если вы имеете достаточные права для выполнения этой операции). В том случае, если вы вошли в систему, воспользовавшись учетной записью пользователя root, следует проявить особую осторожность при использовании команды `rm -rf` (параметр `-f` расшифровывается как force (принудительное выполнение операции), а параметр `-r` - как recursive (рекурсивный обход директорий)), так как в случае работы с учетной записью пользователя root, упомянутые ограничения прав не будут распространяться на вас. Вы сможете в буквальном смысле удалить все файлы вашей системы по неосторожности.

## Утилита `cp` <a name="16"></a>

### Копирование отдельных файлов

Для копирования файла следует использовать утилиту `cp` с аргументами, представленными путями к исходному и целевому файлам.  
В том случае, если в качестве пути к целевому файлу используется путь к директории, исходные файлы будут скопированы в эту целевую директорию.

### Команда `cp -r`

Для копирования директорий целиком следует использовать команду `cp -r` (параметр `-r` позволяет осуществлять рекурсивное копирование всех файлов из всех поддиректорий).

### Копирование множества файлов в директорию

Вы также можете использовать утилиту `cp` для копирования множества файлов в одну директорию. В этом случае последний аргумент (аргумент, указывающий на цель) должен быть представлен путем к директории.

### Команда `cp -i`

Для предотвращения перезаписи существующих файлов в ходе использования утилиты `cp` следует использовать параметр `-i` (для активации интерактивного режима копирования).

## Утилита `mv` <a name="17"></a>

### Переименование файлов и директорий с помощью утилиты `mv`

Утилита `mv` используется для переименования файлов или для перемещения файлов в другие директории.
В том случае, если вам необходимо переименовать один файл, утилита `mv` является предпочтительным инструментом.  
Эта же утилита `mv` может быть использована и для переименования директорий.

### Команда `mv -i`

Утилита `mv` поддерживает параметр `-i` по аналогии с утилитами `cp` и `rm`.

## _Задание_

1. Примените утилиту `file` для определения типа трех различных файлов. Примените команду с флагом `-s` для определения типа файлов `/dev/sda` и `/proc/cpuinfo` (выполняется под пользователем root):
   ```
   sudo file -s /dev/sda
   sudo file -s /proc/cpuinfo
   ```
   Пароль vagrant
   Скриншот вывода последних двух операций поместить в отчет.
2. Создайте пустой файл. Определите тип созданного файла. Скриншот вывода поместить в отчет.
3. Удалите созданный файл. Повторите пункт 2 и удалите созданный файл при помощи интерактивного режима удаления. Скриншот вывода поместите в отчет.
4. Создайте новую директорию и создайте в ней новый файл. Удалите директорию одной командой.

# Работа с содержимым файлов <a name="2"></a>

## Утилита `head` <a name="21"></a>

Вы можете использовать утилиту `head` для вывода первых десяти строк файла.  
Утилита `head` также может использоваться для вывода первых n строк файла.

```
head -6 /etc/passwd
```

Кроме того, утилита `head` может использоваться для вывода первых n байт файла.

```
head -c6 /etc/passwd
```

## Утилита `tail` <a name="22"></a>

Утилита `tail` может использоваться для вывода последних десяти строк файла.  
По аналогии с утилитой `head`, вы можете передать утилите `tail` число, соответствующее количеству строк, которое вы хотите увидеть в выводе.

## Утилита `cat` <a name="23"></a>

Утилита `cat` является одним из наиболее универсальных инструментов операционной системы. Все, что она делает - это копирует данные из стандартного потока ввода в стандартный поток вывода. Данная утилита в комбинации с командной оболочкой позволяет реализовать мощные и разнообразные механизмы обработки данных.

### Объединение файлов

Имя утилиты `cat` является сокращенной формой слова concatenate (объединить). Одним из наиболее простых сценариев использования данной утилиты является объединение файлов в рамках файла большего объема (или полного файла).

### Копирование файлов

Утилита `cat` может использоваться для копирования файлов.

```
cat file1 > file 2
```

## Утилиты `more` и `less` <a name="24"></a>

Утилита `more` может оказаться полезной в случае возникновения необходимости вывода содержимого файлов, которое не умещается на экране. Утилита `more` позволяет ознакомится с содержимым файла, разделенным на страницы. После открытия файла с использованием данной утилиты следует использовать клавишу "пробел" для перехода к следующей странице или клавишу q для выхода из режима просмотра содержимого файла. Некоторые пользователи предпочитают использовать утилиту `less` вместо утилиты `more`.

## _Задание_

1. Выведите 4 первые строки файла `/etc/services`. Скриншот вывода поместите в отчет.
   Выведите 3 последние строки файла `/etc/services`. Скриншот вывода поместите в отчет.
2. Выведите на экран содержимое файла `/etc/resolv.conf`.
3. Создайте три файла:

   ```
   echo one > part1
   echo two > part2
   echo three > part3
   ```

   Выведите содержимое всех трех файлов при помощи одной команды. Скриншот вывода поместите в отчет.

4. Утилита cat также может использоваться для создания текстовых файлов.
   Введите команду:
   ```
   cat > testfile.txt
   ```
   далее введите Ваше ФИО полностью и нажмите комбинацию клавиш ctrl+D. Комбинация клавиш Ctrl+d позволяет передать исполняющемуся процессу символ окончания файла (End of File - EOF), что приведет к завершению исполнения процесса `cat`.
   Выведите содержимое файла при помощи утилиты `head`. Скриншот вывода поместить в отчет.
